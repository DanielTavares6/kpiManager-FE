<div class="container-clients-managers">
  <div class="table-reponsive-clients-managers">

    <div class="central-container-table-clients-managers">
      <h1 class="form-title text-center ">CLIENTS & MANAGERS</h1>


      <span class="contact100-form-symbol">
        <i class="fas fa-portrait fa-3x"></i>

      </span>
      <div class="row">

        <div class="col-2">
          <ul class="nav nav-tabs">
            <li class="nav-item"><button id="client"  [ngClass]="{'active': isManager == false}" [disabled]="isManager == false" class="nav-link active" (click)="getAllClients()">Clients</button></li>
            <li class="nav-item "><button [ngClass]="{'active': isManager}" class="nav-link" [disabled]="isManager" (click)="getAllManagers()">Managers</button></li>
           

          </ul>
        </div>

        <div class="col-10">
          <ul class="nav nav-tabs float-right">
            <li class="nav-item ">
              <button type="button" class=" nav-link" (click)="add()">
                New...
              </button>
            </li>
          </ul>
         
          
        </div>
      </div>


      <!-- <button class="btn btn-custom mr-2" (click)="getAllManagers()">Manager</button>
      <button class="btn btn-custom" (click)="getAllClients()">Clients</button> -->

      <ngx-datatable class="material" [rows]="rows" [columnMode]="ColumnMode.force" headerHeight="50" footerHeight="50"
        rowHeight="auto">
        <ngx-datatable-column name="Name">
        
          <ng-template let-row="row"  ngx-datatable-cell-template>
            
            {{row.name}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="NIPC" *ngIf="isManager == false">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{row.nipc}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Unit"  *ngIf="isManager == true">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{row.unit?.nameUnit || ""}}
            {{test(row)}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Action" [sortable]="false">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <button class="btn btn-custom" id="editButton" (click)="edit(row)">Edit</button>
          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>

    </div>



    <form class="form-group">

      <div bsModal #lgModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
        aria-labelledby="dialog-sizes-name1" [config]="{backdrop: 'static',  keyboard: false}">

        <div class="modal-dialog">
          <div class="modal-content">

            <div class="modal-header">
              <h4 id="dialog-sizes-name1" class="modal-title pull-left">
                <strong *ngIf="isEdit == false"> Create User</strong>
                <strong *ngIf="isEdit == true"> Edit User</strong>
              </h4>
              <button type="button" class="close pull-right" (click)="hide()" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <div class="modal-body">
              <form [formGroup]="clientForm" *ngIf="isManager == false" (ngSubmit)="addClient()">

                <div class="row form-group">
                  <div class="col-2 pt-1">
                    <label for="">Name: </label>
                  </div>
                  <div class="col-10">
                    <input type="text" name="name" formControlName="name" class="form-control w-75 form-control-sm mb-4"
                      placeholder="Insert your name" required />
                  </div>
                </div>

                <div class="row form-group" *ngIf="isEdit == true && isManager == false && isCreate == true">
                  <div class="col-2 pt-1">
                    <label for="">NIPC: </label>
                  </div>
                  <div class="col-10">
                    <input type="text" name="nipc" formControlName="nipc" minlength="9" maxlength="9" class="form-control w-75 form-control-sm mb-4"
                      placeholder="Insert your NIPC" required />
                  </div>

                </div>
                <div class="row form-group" [formGroup]="profileForm" *ngIf="isEdit == true && isManager == true">
                  <div class="col-2 pt-1">
                    <label for="">Unit: </label>
                  </div>
                  <div class="col-10" formGroupName="unit">
                    <select class="form-control w-75 form-control-sm mb-4" formControlName="id" name="unit" >
                      <option value="" disabled hidden>Please select one unit</option>
                      <option *ngFor="let unit of units$ | async ; let i = index" value={{unit.id}}>
                        {{unit.nameUnit}}
                      </option>
                    </select>
                  </div>
                </div>

                <button class="btn btn-primary" [disabled]="clientForm.status !== 'VALID'">Add</button>

              </form>

              <form ></form>

            </div>
          </div>
        </div>
      </div>
    </form>
    <app-layout-nav-bar></app-layout-nav-bar>