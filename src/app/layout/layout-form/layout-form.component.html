<div class="container-100">
<div id="formVisible" class="central-container"> 
    <span class="contact100-form-symbol">
        <img src="assets/imagens/interaction-icon.png" >
    </span> 
    <h1 class="form-title text-center ">INTERACTIONS</h1>
    <!--ng-valid ng-dirty ng-touched-->
<form #formularioInteraction>
    <div class="form-row"> <label for="inputSemana">Interaction Week:</label></div>

    <div class="row">
      <div class="col form-group"><!--LINHA 17: NGCLASS transforma a classe dependente do erro-->
        <input #selectedDate
              type="text"
              (focusin)="validateError(selectedDate.value)"
              placeholder="{{placeHolderText}}"
              [ngClass]="{'form-control' : !hasError, 'animated bounce error' : hasError}"
              bsDaterangepicker
              [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-orange'}">
      </div>
    </div> 

  <div *ngIf="isAuthorized" class="form-group">
    <label for="inputUnidade">Unit:</label>
    <select class="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref2" [(ngModel)]="selectUnit" name="selectUnit" [disabled]="btnDisableUnit" (ngModelChange)="onChange($event)">
      <option [ngValue]="undefined" disabled  selected>Please select one unit</option>
      <option *ngFor="let unit of units$ | async ; let i = index" value="{{unit.id}}+{{unit.nameUnit}}">{{unit.nameUnit}}</option>
    </select>
  </div>
  <div *ngIf='isAuthorized' class="form-group">
    <label for="inputAddress2">Business Manager: </label>
    <select class="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref" [(ngModel)]="selectPerson" name="selectPerson" [disabled]="btnDisable" (click)="removeBorder()" >
      <option [ngValue]="undefined" disabled  selected>Please select one manager</option>  
      <option *ngFor="let man of managersbyUnit$ | async ; let i = index" value="{{man.id}}+{{man.name}}">{{man.name}}</option>
     </select>
  </div>
  <div class="text-center">
    <button style="background-color: #e46310; border-color: #fca772;" id="modalButton" (click)="checkFields(selectedDate.value)" class="btn-primary btn-lg mr-auto"  data-target="#exampleModal"> Add Interactions <img class="ml-2" src="assets/imagens/iconMore.png" width="25" height="25"> </button>
  </div>
  
  <table class="table mt-3" id="tableInteractions" >
    <thead class="thead-light">
      <tr >
        <th scope="col">Client</th>
        <th scope="col">Type of interactions</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
        <tr *ngFor="let col of interactionTypeRow; let i = index">
        <td>{{col.nameClient}}</td>
        <td>{{col.interaction}}</td>
        <td><button class="btn btn-danger" (click)="delRow(i)"><img src="assets/imagens/trashIcon.png" width="25" height="25"></button></td>
      </tr>
    </tbody>
  </table>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Interaction</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row">

        <div class="dropdown show col-sm">
          <select (click)="removeBorderCliente()"  class="custom-select my-1 mr-sm-2" type="number" id="selectionClient" [(ngModel)]="selectClient" name="selectClient">
            <option [ngValue]="undefined" disabled  selected>Select the client</option>  
            <option *ngFor="let client of clients$ | async ; let i = index" value = "{{client.id}}+{{client.name}}" >{{client.name}}</option>
        </select>
        <select (click)="removeBorderInteraction()" class="custom-select my-1 mr-sm-2" type="number" id="selectionType" [(ngModel)]="selectType" name="selectType" >
          <option [ngValue]="undefined" disabled  selected>Select the interaction</option>  
          <option *ngFor="let int of interactionTypes$ | async ; let i = index" value="{{int.id}}+{{int.interactionType}}">{{int.interactionType}}</option>
      </select>
    </div>

          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" style="background-color:#a7a6a5; border-style: none;" class="btn btn-secondary"  data-dismiss="modal">Close</button>
        <button type="button" style="background-color: #e46310; border-style: none;" class="btn btn-primary" (click)="addInteraction(selectedDate.value)">Save changes</button>
      </div>
    </div>
  </div>
</div>
  <div>
    <button (click)="sendData(selectedDate.value)" type="submit" style="background-color: #e46310; border-color: #fca772;" class="btn-primary btn-lg btn-block">Send<img class="ml-2" src="assets/imagens/sendIcon.png" width="25" height="25"> </button>
  </div>

<swal
  #fireSwal
  positio='top-end'
  icon='success'
  title='Your interaction has been saved'
  showConfirmButton='false'
  timer='1500'>
</swal>

<swal
  #errorSwal
  positio='top-end'
  icon='error'
  title='Must fill all fields'
  showConfirmButton='true'
  timer='1500'>
</swal>
</form>
</div>
</div>